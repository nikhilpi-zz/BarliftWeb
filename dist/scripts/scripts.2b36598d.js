"use strict";angular.module("barliftApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/admin",{templateUrl:"views/admin.html",controller:"AdminCtrl"}).otherwise({redirectTo:"/"})}]).run(["$rootScope","$location",function(a,b){a.$on("$routeChangeStart",function(c,d){null===a.loggedInUser&&("views/admin.html"===d.templateUrl||b.path("/login"))})}]),angular.module("barliftApp").controller("MainCtrl",["$scope","ParseService",function(a,b){a.user={email:"test1"},console.log(b),a.addEmail=function(a){b.addEmail(a.email,function(a){console.log(a)})}}]),angular.module("barliftApp").controller("HeaderCtrl",["$location",function(a,b){a.isActive=function(a){return a===b.path()}}]),angular.module("barliftApp").factory("ParseService",function(){Parse.initialize("5DZi1FrdZcwBKXIxMplWsqYu3cEEumlmFDB1kKnC","G7yhVdBRY3S2jvjkHKddlsES5YZu1z99Nh9JPLTN");var a,b=Parse.Object.extend("email"),c={name:"Parse",login:function(b,c,d){Parse.User.logIn(b,c,{success:function(b){a=b,d(b)},error:function(a,b){alert("Error: "+b.message)}})},FB_login:function(b){Parse.FacebookUtils.logIn(null,{success:function(c){alert(c.existed()?"User logged in through Facebook!":"User signed up and logged in through Facebook!"),a=c,b(c)},error:function(){alert("User cancelled the Facebook login or did not fully authorize.")}})},signUp:function(b,c,d){Parse.User.signUp(b,c,{ACL:new Parse.ACL},{success:function(b){a=b,d(b)},error:function(a,b){alert("Error: "+b.message)}})},logout:function(){Parse.User.logOut()},getEmails:function(a){var c=new Parse.Query(b);c.find({success:function(b){a(b)},error:function(a){alert("Error: "+a.message)}})},addEmail:function(a,c){var d=new b;d.save({email:a},{success:function(a){c(a)},error:function(a){alert("Error: "+a.message)}})},getUser:function(){return a?a:void 0},isLoggedIn:function(){return a?!0:!1}};return c}),angular.module("barliftApp").controller("LoginCtrl",["$scope","$location","ParseService","$rootScope",function(a,b,c,d){a.login=function(){c.login(a.login_username,a.login_password,function(a){d.loggedInUser=a,b.path("/admin")})}}]),angular.module("barliftApp").controller("AdminCtrl",["$scope","$location","ParseService",function(a,b,c){c.isLoggedIn()?a.user=c.getUser():b.path("/login"),a.emails=[],c.getEmails(function(b){a.$apply(function(){a.emails=b})})}]),angular.module("barliftApp").directive("emailGrid",function(){return{template:'<div ng-repeat="email in emails">{{email}}</div>',restrict:"E",link:function(){}}});